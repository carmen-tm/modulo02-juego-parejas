{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["/* eslint-disable no-console */\n'use strict';\n\n//Get elements\nconst inputsRadioEls = document.querySelectorAll('.number-cards__button');\nconst btnStartEl = document.querySelector('.btn-start');\nconst listResultsEl = document.querySelector('.app-results');\nconst appMessageEl = document.querySelector('.app-message');\n\nlet NUMBER = '';\nlet cardsFromAPI = [];\n\nlet pairCards = [];\n\n//Functions\nfunction drawCards(array) {\n  listResultsEl.innerHTML = '';\n  //Paint as many cards as the user choice\n  for (const element of array) {\n    const { image, pair } = element;\n\n    const itemEl = document.createElement('li');\n    const divFaceEl = document.createElement('div');\n    divFaceEl.style.backgroundImage = `url(${image})`;\n    divFaceEl.setAttribute('data-pair', pair);\n    divFaceEl.classList.add('card', 'card--face', 'card--hidden');\n\n    const divBackEl = document.createElement('div');\n    divBackEl.classList.add('card', 'card--back');\n\n    itemEl.appendChild(divFaceEl);\n    itemEl.appendChild(divBackEl);\n    listResultsEl.appendChild(itemEl);\n  }\n}\n\nfunction handlerCardsClick(event) {\n  const selectedCardEl = event.currentTarget;\n  selectedCardEl.classList.toggle('card--hidden');\n\n  const selectedCardFaceEl = selectedCardEl.previousSibling;\n  const selectedCardBackEl = selectedCardEl.nextSibling;\n\n  if (selectedCardFaceEl) {\n    selectedCardFaceEl.classList.toggle('card--hidden');\n  }\n  if (selectedCardBackEl) {\n    selectedCardBackEl.classList.toggle('card--hidden');\n  }\n\n  //Instructions just to be applied when one card is already up. Condition??\n  const cardsDown = [];\n  const cardsUp = [];\n  const allCardsFaceEl = document.querySelectorAll('.card--face');\n  for (const card of allCardsFaceEl) {\n    if (card.classList.contains('card--hidden')) {\n      cardsDown.push(card);\n    } else {\n      cardsUp.push(card);\n    }\n  }\n\n  const cardsUpNow = NUMBER - cardsDown.length;\n  const selectedCardPairId = parseInt(\n    selectedCardFaceEl.getAttribute('data-pair')\n  );\n\n  if (cardsUpNow === 1) {\n    pairCards = [];\n    pairCards[0] = selectedCardPairId;\n    appMessageEl.innerHTML = '';\n    console.log(selectedCardPairId);\n  } else if (cardsUpNow === 2) {\n    pairCards[1] = selectedCardPairId;\n    console.log('solo hay una carta boca arriba');\n    if (pairCards[0] === pairCards[1]) {\n      //Print message on HTML\n      appMessageEl.innerHTML = 'EUREKA!!!';\n      appMessageEl.classList.add('eureka');\n\n      // for (const card of cardsUp) {\n      //   setInterval(card.classList.add('card--hidden'), 3000);\n      // }\n      console.dir(cardsDown);\n    } else {\n      appMessageEl.innerHTML = '';\n      console.log('no coinciden');\n    }\n  } else {\n    console.log('m√°s de una carta boca arriba');\n  }\n}\n\nfunction requestApi(URL) {\n  fetch(`${URL}`)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(responsedParsed) {\n      cardsFromAPI = responsedParsed;\n      drawCards(cardsFromAPI);\n      return cardsFromAPI;\n    })\n    .then(function(data) {\n      const cardsEls = document.querySelectorAll('.card');\n      for (const element of cardsEls) {\n        element.addEventListener('click', handlerCardsClick);\n      }\n      console.log(cardsFromAPI);\n    });\n}\n\nfunction saveOnLS(key, value) {\n  localStorage.setItem(key, value);\n}\n\nfunction retrieveFromLS(key) {\n  const infoSavedOnLS = parseInt(localStorage.getItem(key));\n\n  if (infoSavedOnLS) {\n    NUMBER = infoSavedOnLS;\n    for (const element of inputsRadioEls) {\n      const elementNumber = parseInt(element.getAttribute('data-number'));\n      if (elementNumber === NUMBER) {\n        element.setAttribute('checked', 'true');\n      }\n    }\n  }\n}\n\n//Handlers\nfunction handlerStartClick(event) {\n  event.preventDefault();\n  let userChoiceEl = '';\n\n  //Get user election\n  for (const element of inputsRadioEls) {\n    element.checked ? (userChoiceEl = element) : '';\n  }\n  NUMBER = parseInt(userChoiceEl.getAttribute('data-number'));\n\n  let URL = `https://raw.githubusercontent.com/Adalab/cards-data/master/${NUMBER}.json`;\n\n  saveOnLS('userChoice', NUMBER);\n  requestApi(URL);\n}\n\n//Init\nfunction init() {\n  retrieveFromLS('userChoice');\n  btnStartEl.addEventListener('click', handlerStartClick);\n}\ninit();\n"]}